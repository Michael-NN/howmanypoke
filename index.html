<html>
	<head>
		<style>
		</style>
	</head>
	<body>
		<h1>How Many Pokemon Can You Name in 5 Minutes?</h1>
		
		<button id="startButton" label="start" onclick="startGame()">Start</button>
		<button id="restartButton" label="restart" onclick="setUp()">Reset</button>
		
		<div id="timer"></div>
		
		<input id="inputBox" onkeydown="addToList(event)" autocomplete="off">
		
		<span id="addMsg">Nice one!</span>
		<span id="repMsg">Already got that one</span>
		<span id="badMsg">Sorry, not a Pokemon!</span>
		
		<div id="namedDiv"></div>
	</body>
	<script>
		const enterCode = 13;
		let startButton = document.getElementById("startButton");
		let restartButton = document.getElementById("restartButton");
		let timer = document.getElementById("timer");
		let inputBox = document.getElementById("inputBox");
		let namedDiv = document.getElementById("namedDiv");
		let addMsg = document.getElementById("addMsg");
		let repMsg = document.getElementById("repMsg");
		let badMsg = document.getElementById("badMsg");
		
		let namedList = [];
		
		setUp();
		
		function setUp() {
			startButton.style.display = "inline";
			restartButton.style.display = "none";
			timer.innerHTML = "";
			inputBox.style.display = "none";
			clearMessage();
		}
		
		function startGame() {
			startButton.style.display = "none"
			startTimer();
			inputBox.style.display = "inline"
		}
		
		function endGame() {
			restartButton.style.display = "inline";
			clearMessage();
		}
		
		function startTimer() {
			timer.innerHTML = "005:00";
			incrementTimer();
		}
		
		function incrementTimer () {
			let presentTime = timer.innerHTML;
			let timeArray = presentTime.split(/[:]+/);
			let m = timeArray[0];
			let s = checkSecond((timeArray[1] - 1));
			if (s == 59) {
				m = m-1;
			}
			if( m < 0 ) {
				endGame();
			} else {
				timer.innerHTML = m + ":" + s;
				setTimeout(incrementTimer, 1000);
			}
		}
		
		function checkSecond(sec) {
			if (sec < 10 && sec >= 0) {sec = "0" + sec}; // add zero in front of numbers < 10
			if (sec < 0) {sec = "59"};
			return sec;
		}
		
		function addToList(event) {
			if (event.keyCode === enterCode) {
				let entry = inputBox.value.charAt(0).toUpperCase() + inputBox.value.toLowerCase().slice(1);
				if (pokeDex.includes(entry)) {
					if (!namedList.includes(entry)) {
						addMessage();
						namedList.push(entry);
						inputBox.value = '';
						namedDiv.innerHTML = namedList;
					} else {
						repMessage();
						inputBox.value = '';
					}
				} else {
					badMessage();
					inputBox.value = '';
				}
			}
		}
		
		function addMessage() {
			addMsg.style.display = "inline";
			repMsg.style.display = "none";
			badMsg.style.display = "none";
		}
		
		function repMessage() {
			addMsg.style.display = "none";
			repMsg.style.display = "inline";
			badMsg.style.display = "none";
		}

		function badMessage() {
			addMsg.style.display = "none";
			repMsg.style.display = "none";
			badMsg.style.display = "inline";
		}

		function clearMessage() {
			addMsg.style.display = "none";
			repMsg.style.display = "none";
			badMsg.style.display = "none";
		}
		
		const pokeDex = ['Bulbasaur', 'Ivysaur', 'Venusaur', 'Charmander', 'Charmeleon', 'Charizard', 'Squirtle', 'Wartortle', 'Blastoise'];
	</script>
</html>
